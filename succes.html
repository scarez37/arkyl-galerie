<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paiement R√©ussi ‚Äî ARKYL</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }

        /* Particules dor√©es en fond */
        .bg-particles {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }
        .particle {
            position: absolute;
            width: 4px; height: 4px;
            background: #d4af37;
            border-radius: 50%;
            opacity: 0;
            animation: floatParticle linear infinite;
        }

        @keyframes floatParticle {
            0%   { opacity: 0; transform: translateY(100vh) scale(0); }
            10%  { opacity: 0.6; }
            90%  { opacity: 0.3; }
            100% { opacity: 0; transform: translateY(-20px) scale(1.5); }
        }

        .card {
            position: relative;
            z-index: 1;
            background: rgba(255,255,255,0.07);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(212,175,55,0.25);
            border-radius: 24px;
            padding: 50px 45px;
            max-width: 520px;
            width: 100%;
            text-align: center;
            box-shadow: 0 30px 80px rgba(0,0,0,0.5), 0 0 60px rgba(212,175,55,0.08);
            animation: slideUp 0.7s cubic-bezier(0.22,1,0.36,1) forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px) scale(0.96); }
            to   { opacity: 1; transform: translateY(0) scale(1); }
        }

        .check-circle {
            width: 90px; height: 90px;
            background: linear-gradient(135deg, rgba(76,175,80,0.2), rgba(76,175,80,0.05));
            border: 2px solid rgba(76,175,80,0.5);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 28px;
            font-size: 40px;
            animation: popIn 0.5s cubic-bezier(0.36,0.07,0.19,0.97) 0.4s both;
            box-shadow: 0 0 30px rgba(76,175,80,0.3);
        }

        @keyframes popIn {
            0%  { transform: scale(0) rotate(-15deg); }
            70% { transform: scale(1.15) rotate(5deg); }
            100%{ transform: scale(1) rotate(0deg); }
        }

        .logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 13px;
            letter-spacing: 6px;
            color: #d4af37;
            text-transform: uppercase;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 32px;
            font-weight: 400;
            color: #fff;
            margin-bottom: 14px;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 14px;
            color: rgba(255,255,255,0.65);
            line-height: 1.7;
            margin-bottom: 32px;
        }

        /* √âtapes du Tiers de Confiance */
        .escrow-steps {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 32px;
            text-align: left;
        }

        .escrow-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 500;
            animation: fadeInLeft 0.4s ease both;
        }
        .escrow-step:nth-child(1) { animation-delay: 0.6s; background: rgba(76,175,80,0.1);   border: 1px solid rgba(76,175,80,0.25);   color: #a5d6a7; }
        .escrow-step:nth-child(2) { animation-delay: 0.75s; background: rgba(212,175,55,0.08); border: 1px solid rgba(212,175,55,0.25); color: #f5e39a; }
        .escrow-step:nth-child(3) { animation-delay: 0.9s; background: rgba(33,150,243,0.08); border: 1px solid rgba(33,150,243,0.25); color: #90caf9; }

        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-20px); }
            to   { opacity: 1; transform: translateX(0); }
        }

        .escrow-step-icon { font-size: 20px; flex-shrink: 0; }

        .btn-retour {
            display: inline-block;
            padding: 14px 36px;
            background: linear-gradient(135deg, #d4af37, #a08020);
            color: #1a1a1a;
            font-weight: 700;
            font-size: 14px;
            border-radius: 50px;
            text-decoration: none;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(212,175,55,0.35);
            animation: fadeInLeft 0.4s ease 1.1s both;
        }
        .btn-retour:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212,175,55,0.5);
        }

        .order-id {
            font-size: 11px;
            color: rgba(255,255,255,0.35);
            margin-top: 20px;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

    <!-- Particules fond -->
    <div class="bg-particles" id="particles"></div>

    <div class="card">
        <div class="logo">ARKYL ¬∑ Galerie d'Art Africaine</div>

        <div class="check-circle">‚úÖ</div>

        <h1>Paiement r√©ussi !</h1>
        <p class="subtitle">
            Merci pour votre commande. Vos fonds sont <strong style="color:#d4af37;">s√©curis√©s par ARKYL</strong> et seront lib√©r√©s √† l'artiste uniquement apr√®s confirmation de votre r√©ception.
        </p>

        <!-- √âtapes Tiers de Confiance -->
        <div class="escrow-steps">
            <div class="escrow-step">
                <span class="escrow-step-icon">üîí</span>
                <span>Fonds s√©curis√©s ‚Äî votre paiement est bloqu√© chez ARKYL</span>
            </div>
            <div class="escrow-step">
                <span class="escrow-step-icon">üöö</span>
                <span>L'artiste pr√©pare l'exp√©dition de votre ≈ìuvre</span>
            </div>
            <div class="escrow-step">
                <span class="escrow-step-icon">üì¨</span>
                <span>Confirmez la r√©ception ‚Üí les fonds sont lib√©r√©s √† l'artiste</span>
            </div>
        </div>

        <a href="index.html" class="btn-retour">‚Üê Retour √† la galerie</a>

        <div class="order-id" id="orderRef">R√©f√©rence chargement...</div>
    </div>

    <script>
        // Afficher la r√©f√©rence commande depuis l'URL Stripe (?session_id=...)
        const params = new URLSearchParams(window.location.search);
        const sessionId = params.get('session_id');
        const ref = document.getElementById('orderRef');
        if (sessionId) {
            ref.textContent = 'R√©f. transaction : ' + sessionId.slice(-12).toUpperCase();
        } else {
            ref.textContent = 'R√©f. : ARK-' + Date.now().toString().slice(-8);
        }

        // G√©n√©rer particules dor√©es
        const container = document.getElementById('particles');
        for (let i = 0; i < 25; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.cssText = `
                left: ${Math.random()*100}%;
                width: ${2 + Math.random()*4}px;
                height: ${2 + Math.random()*4}px;
                animation-duration: ${4 + Math.random()*6}s;
                animation-delay: ${Math.random()*4}s;
                opacity: ${0.3 + Math.random()*0.4};
            `;
            container.appendChild(p);
        }

        // Vider le panier local apr√®s succ√®s Stripe
        try {
            localStorage.removeItem('arkyl_cart');
            const data = JSON.parse(localStorage.getItem('arkyl_orders') || '[]');
            // Marquer la derni√®re commande comme pay√©e via Stripe si session_id pr√©sent
            if (sessionId && data.length > 0) {
                data[0].stripe_session = sessionId;
                data[0].escrow_status  = 'pay√©e_en_attente';
                localStorage.setItem('arkyl_orders', JSON.stringify(data));
            }
        } catch(e) {}
    </script>
</body>
</html>
